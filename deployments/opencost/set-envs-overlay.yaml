#@ load("@ytt:overlay", "overlay")
#@overlay/match by=overlay.subset({"kind":"Deployment","metadata":{"name":"opencost"}})
---
spec:
  template:
    spec:
      containers:
        #@overlay/match by=overlay.subset({"name": "opencost"})
        -
          #@overlay/replace
          env:
          - name: PROMETHEUS_SERVER_ENDPOINT
            valueFrom:
              secretKeyRef:
                name: prometheus
                key: url
          - name: DB_BASIC_AUTH_USERNAME
            valueFrom:
              secretKeyRef:
                name: prometheus
                key: username
          - name: DB_BASIC_AUTH_PW
            valueFrom:
              secretKeyRef:
                name: prometheus
                key: password
          - name: PROM_CLUSTER_ID_LABEL
            value: cluster
          - name: CLUSTER_ID
            value: wallhouse
          - name: KUBECOST_NAMESPACE
            value: opencost
          - name: CLOUD_PROVIDER_API_KEY
            value: AIzaSyD29bGxmHAVEOBYtgd8sYM2gM2ekfxQX4U
